<!--
 * @Author: Shuai Wang
 * @Github: https://github.com/wsustcid
 * @Version: 1.0.0
 * @Date: 2021-09-27 09:14:07
 * @LastEditTime: 2021-10-15 19:55:38
-->
- [自动驾驶汽车运动规划](#自动驾驶汽车运动规划)
  - [0. 课程介绍](#0-课程介绍)
  - [1. 规划问题](#1-规划问题)
  - [2. 规划建图](#2-规划建图)
  - [3. 任务规划](#3-任务规划)
  - [4. 动态目标](#4-动态目标)
  - [5. 行为规划](#5-行为规划)
  - [6. 被动规划](#6-被动规划)
  - [7. 局部规划](#7-局部规划)
  - [8. 项目实践](#8-项目实践)
  - [阅读材料](#阅读材料)


# 自动驾驶汽车运动规划
<div align=center><img src=./assets/cover.png width=700></div>

## 0. 课程介绍
运动规划问题是指通过对车辆的路径和速度进行规划使之能够从A点安全的到达B点。为了实现这一目标，运动规划要求对周围环境中的车辆、行人以及其他障碍物都有很好的感知，并且考虑到问题的复杂性，解决运动规划问题的常用做法是将其分解成几个小的子问题。在本课程中，我们将整个运动规划任务分层构建成三个阶段的任务：
  - 任务规划：类似于在线导航软件所完成的路线规划任务
  - 行为规划：确保我们驾驶行为遵守道路的交通规则
  - 局部规划：确保最终规划出的路径是平滑的且能够避开所有障碍。


## 1. [规划问题](./Planning%20Problem/README.md)
本章节主要对自动驾驶运动规划问题的定义和基本概念进行了介绍：
  - 首先对自动驾驶运动规划问题中的三个核心概念进行了介绍: 任务、场景以及行为
  - 由于运动规划问题的核心还是解优化问题，因此，接下来分别对自动驾驶汽车运动规划过程中面临的约束条件和优化目标方程进行了初步的介绍
  - 最后，对整个运动规划问题进行了明确的分层级划分：任务规划、行为规划和局部规划，并分别对其问题的定义和现有方法进行了初步介绍

[课程作业](Planning%20Problem/assignment/README.md)

## 2. [规划建图](./Mapping%20for%20Planning/README.md)
本章节对规划问题中常用的占据栅格地图进行了详细的介绍
  - 首先介绍占据栅格地图的基本个概念和更新原理
  - 然后对如何基于雷达数据利用贝叶斯对数几率集合逆测量模型进行概率更新进行了详细的理论推导
  - 除此之外，对点云数据的预处理流程也进行了介绍
  - 最后，介绍了一种常用的高精地图格式 Lanelet 地图

[课程作业](Mapping%20for%20Planning/assignment/assessment.ipynb)

## 3. [任务规划](./Mission%20Planning/README.md)
本章节从广度优先搜索算法BFS作为切入，对两种典型的路径规划算法，Dijkstra 以及 A* 进行了详细的介绍，并在作业中进行了具体的实现。

[课程作业](Mission%20Planning/assignment/README.md)

## 4. [动态目标](Dynamic%20Object%20/README.md)
本章节对驾驶环境中动态障碍物的运动预测与碰撞检测方法进行了详细的介绍
  - 首先对运动预测模型的输入与问题假设进行了介绍，并介绍了一种简单的定常速度运动模型
  - 然后动基于地图的运动预测方法进行了详细介绍，并分别从两个角度介绍了如何分别具体提升位置预测和速度预测精度
  - 最后对与动态目标的碰撞时间计算方法进行了介绍，分别介绍了基于仿真的方法和基于估计的方法

[课程作业](Dynamic%20Object%20/assignment/README.md))

## 5. [行为规划](Behavior%20Planning/README.md)
本章节首先对行为规划器的基本组成进行了介绍，包括常规的驾驶决策行为、行为规划器的输入、输出，以及最常用的一种行为规划器：有限状态机。然后简单到复杂对如何构建有限状态机进行了详细介绍
  - 首先考虑没有动态目标的交叉路口场景
  - 然后处理包含动态目标的交叉路口场景
  - 最后通过分层构建多个状态机，使其能够同时处理多种场景

除此之外，也介绍了有限状态机的不足之处，并对其他行为规划的高级方法，如专家系统、模糊逻辑、强化学习、机器学习等方法进行了简要介绍。

[课程作业](Behavior%20Planning/assignment/README.md)

## 6. [被动规划](Reactive%20Planning/README.md)
本章节介绍了一种用于静态环境下的反应式导航方法首先对反应式导航的两个关键组件：车辆运动学模型和避障检查进行了介绍，包括基于条带的碰撞检查方法和基于圆的碰撞检查。然后对反应式导航算法 Trajectory rollout 算法的具体步骤进行了详细介绍，包括
  -  基于控制区间采样的轨迹集合生成
  -  基于运动学模型的轨迹传播
  -  基于条带的碰撞检查
  -  基于目标方程的轨迹选择
最后通过动态窗口法对车辆轨迹施加线加速度和角加速度约束，以提高轨迹的舒适性

[课程在作业](Reactive%20Planning/assignment/README.md)

## 7. [局部规划](Local%20Planning/README.md)
本章节对典型的局部路径规划方法Conformal Lattice 进行了详细的介绍，如何基于上游决策和环境信息，生成局部路径与对应的速度曲线：
  - 首先对局部路径规划所需要考虑的边界条件和运动学约束进行了介绍，并介绍了两种典型的参数曲线：五次样条和多项式螺旋曲线
  - 然后对局部路径优化问题进行了问题建模，将其建模成了一个带约束的非线性优化问题，目的是求解出一条最优的参数曲线的参数
  - 中间对常用的python非线性优化器进行了简要介绍，用于解上述非线性优化问题
  - 然后重点介绍了conforma Lattice Planner 的规划流程：路径生成-> 碰撞检查 -> 路径选择
  - 最后介绍了为对应路径点生成速度的方法，包括线性斜坡速度和梯形速度

至此，我们就从任务规划开始，通过结合行为决策，最后汇总到局部规划器，生成一条用于车辆具体可执行的局部路径和对应速度，用于后续控制模块产生对刹车和油门的控制指令。


## 8. [项目实践](Project/README.md)
本项目的主要目标为将之前讨论的所有子模块的内容进行集成，最终创建一个完整无人驾驶车辆运动规划器。主要用Python构建规划器并与Carla仿真器进行交互，在给定一个典型场景中实现自主导航任务。

在实践过程中，我们将基于已构建好的控制器，并且假设周围环境的所有信息都是可获取的，这样便可以专注于规划器的设计。


## 阅读材料
  - S. M. LaValle. Planning Algorithms. Cambridge University Press, Cambridge, U.K., 2006. Available at http://planning.cs.uiuc.edu/.
  - S. Thrun, W. Burgard, and D. Fox, Probabilistic robotics. Cambridge, MA: MIT Press, 2010.
  - N. J. Nilsson, “Artificial intelligence: A modern approach,” Artificial Intelligence, vol. 82, no. 1-2, pp. 369–380, 1996. 
